import{z as p,H as P,d as a,e as C,j as r,m as N}from"./index-B1tvkX9G.js";import{P as x}from"./ProductCard-C7Drp9gl.js";function v(){var i,u;const{categoryId:s}=p(),o=P(),c=((i=o.state)==null?void 0:i.categoryName)||"",[d,y]=a.useState([]),[n,g]=a.useState(c),[m,f]=a.useState(!0);return a.useEffect(()=>{(async()=>{var l;try{const{data:e}=await N.get(`https://ecommerce-final-project-server.onrender.com/products/getAllProducts?category=${s}`,{withCredentials:!0});if(y(e.data),!c&&e.data.length>0&&((l=e.data[0].categories)==null?void 0:l.length)>0){const h=e.data[0].categories[0];g(h.category_name||"Category")}}catch(e){console.error("Error loading category products:",e)}finally{f(!1)}})()},[s,c]),a.useEffect(()=>{var t;(t=o.state)!=null&&t.categoryName&&g(o.state.categoryName)},[(u=o.state)==null?void 0:u.categoryName,s]),C("div",{className:"category-products",children:[r("h2",{style:{textAlign:"center"},children:n?`${n} Products`:"Category Products"}),m?r("p",{children:"Loading..."}):d.length===0?r("p",{children:"No products found in this category."}):r("div",{className:"product-list",children:d.map(t=>r(x,{product:t},t._id))})]})}export{v as default};
