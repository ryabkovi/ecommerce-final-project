import{d as r,t as u,j as e,e as h,m as f}from"./index-BnvfVVTl.js";function P(){const[t,d]=r.useState({email:"",token:"",new_password:"",confirm_password:""}),[i,o]=r.useState(""),[m,n]=r.useState(""),l=u();r.useEffect(()=>{const s=new URLSearchParams(window.location.search);d(a=>({...a,email:s.get("email")||"",token:s.get("token")||""}))},[]);const p=s=>{d(a=>({...a,[s.target.name]:s.target.value}))};return e("div",{className:"reset-password-confirm-container",children:h("form",{className:"form-wrapper",onSubmit:async s=>{var a,w;if(s.preventDefault(),t.new_password!==t.confirm_password){n("Passwords do not match"),o("");return}try{const{data:c}=await f.put("https://ecommerce-final-project-server.onrender.com/users/reset-password",t,{withCredentials:!0});o(c.message),n(""),setTimeout(()=>{l("/")},2e3)}catch(c){n(((w=(a=c.response)==null?void 0:a.data)==null?void 0:w.message)||"Failed to reset password"),o("")}},children:[e("h2",{children:"Set New Password"}),e("p",{children:"Please enter your new password"}),i&&e("div",{className:"success-msg",children:i}),m&&e("div",{className:"error-msg",children:m}),e("input",{type:"password",name:"new_password",placeholder:"New Password",onChange:p,required:!0}),e("input",{type:"password",name:"confirm_password",placeholder:"Confirm New Password",onChange:p,required:!0}),e("button",{type:"submit",className:"reset-btn",children:"Reset Password"})]})})}export{P as default};
