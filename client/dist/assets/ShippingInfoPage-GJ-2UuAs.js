import{d as o,A as I,j as e,e as a,N as d,m as q}from"./index-BnvfVVTl.js";import{D as z}from"./DeleteAccountModal-DjCEM9Lz.js";function j(){const{user:t,setUser:p,getAuth:u}=o.useContext(I),[l,c]=o.useState({country:"",city:"",street:"",building:"",floor:"",zipCode:"",apartment:""}),[A,m]=o.useState(""),[h,f]=o.useState(!0);o.useEffect(()=>{t!=null&&t.shipment_address&&(c({country:t.shipment_address.country||"",city:t.shipment_address.city||"",street:t.shipment_address.street||"",building:t.shipment_address.building||"",floor:t.shipment_address.floor||"",zipCode:t.shipment_address.zipCode||"",apartment:t.shipment_address.apartment||""}),f(!1))},[t]);const n=i=>{const{name:s,value:r}=i.target;c(w=>({...w,[s]:r}))},y=async i=>{i.preventDefault();try{const s={shipment_address:l},r=await q.put(`https://ecommerce-final-project-server.onrender.com/users/update-profile/${t._id}`,s,{withCredentials:!0});r.data.success&&(alert("✅ Shipping info updated successfully!"),p(r.data.user),await u())}catch(s){console.error("❌ Failed to update shipping info:",s),alert("❌ Failed to update shipping info")}},g=i=>{const s=i.target.value;m(s),c(r=>({...r,country:s}))},{country:v,city:C,street:N,building:b,floor:x,apartment:S,zipCode:_}=l;return h?e("div",{className:"content",children:e("h2",{children:"Loading shipping info..."})}):a("div",{className:"shipping-info-page",children:[a("div",{className:"sidebar",children:[a(d,{to:"/account",className:"sidebar-item",children:[e("i",{className:"fas fa-user"})," Personal Info"]}),a(d,{to:"/payment-method",className:"sidebar-item",children:[e("i",{className:"fas fa-credit-card"})," Payment Methods"]}),a(d,{to:"/MyOrder",className:"sidebar-item",children:[e("i",{className:"fas fa-box"})," My Orders"]}),a(d,{to:"/shipping-info",className:"sidebar-item active",children:[e("i",{className:"fas fa-truck"})," Shipping Info"]}),a(d,{to:"/my-favorite",className:"sidebar-item",children:[e("i",{className:"fas fa-star"})," Favorites"]}),e(z,{})]}),a("div",{className:"content",children:[e("h2",{children:"Shipping Information"}),a("form",{onSubmit:y,children:[a("div",{className:"form-row",children:[e("input",{type:"text",name:"country",value:v,onChange:g,placeholder:"Country",required:!0}),e("input",{type:"text",name:"city",value:C,onChange:n,placeholder:"City",required:!0})]}),a("div",{className:"form-row",children:[e("input",{type:"text",name:"street",value:N,onChange:n,placeholder:"Street",required:!0}),e("input",{type:"text",name:"building",value:b,onChange:n,placeholder:"Building Number",required:!0})]}),a("div",{className:"form-row",children:[e("input",{type:"text",name:"floor",value:x,onChange:n,placeholder:"Floor",required:!0}),e("input",{type:"text",name:"apartment",value:S,onChange:n,placeholder:"Apartment"}),e("input",{type:"text",name:"zipCode",value:_,onChange:n,placeholder:"ZIP Code"})]}),e("button",{type:"submit",className:"save-btn blue",children:"Save Changes"})]})]})]})}export{j as default};
